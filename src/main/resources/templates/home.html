<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PTC Agency - Backend</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="bg-gray-50">
    <div class="min-h-screen">
      <!-- Header -->
      <header class="bg-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
          <h1 class="text-3xl font-bold">Bienvenido a PTC Agency Backend</h1>
          <p class="text-blue-100 mt-2">
            Sistema de gestión de agencia de viajes
          </p>
        </div>
      </header>

      <!-- Main Content -->
      <main class="container mx-auto px-4 py-8">
        <!-- Alerts -->
        <div
          th:if="${success}"
          class="mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"
          role="alert"
        >
          <span class="block sm:inline" th:text="${success}"></span>
        </div>

        <div
          th:if="${error}"
          class="mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"
          role="alert"
        >
          <span class="block sm:inline" th:text="${error}"></span>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Users Table Section -->
          <div class="lg:col-span-2">
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
              <div class="bg-gray-800 text-white px-6 py-4">
                <h2 class="text-xl font-semibold">Personal Registrado</h2>
              </div>

              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gray-50">
                    <tr>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        ID
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Teléfono
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Salario
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Moneda
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Fecha Contratación
                      </th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-gray-200">
                    <tr
                      th:each="staff : ${staffPage.content}"
                      class="hover:bg-gray-50"
                    >
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                        th:text="${staff.id}"
                      ></td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                        th:text="${staff.phoneNumber}"
                      ></td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                        th:text="${#numbers.formatDecimal(staff.salary, 1, 2)}"
                      ></td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                      >
                        <span
                          class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"
                          th:text="${staff.currency}"
                        ></span>
                      </td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                        th:text="${staff.hireDate.isPresent() ? #temporals.format(staff.hireDate.get(), 'dd/MM/yyyy') : 'N/A'}"
                      ></td>
                    </tr>
                    <tr th:if="${staffPage.content.isEmpty()}">
                      <td
                        colspan="5"
                        class="px-6 py-4 text-center text-gray-500"
                      >
                        No hay personal registrado
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <!-- Pagination -->
              <div
                class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"
              >
                <div class="flex-1 flex justify-between sm:hidden">
                  <a
                    th:href="@{/(page=${currentPage - 1}, size=10)}"
                    th:classappend="${currentPage == 1} ? 'pointer-events-none opacity-50' : ''"
                    class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                  >
                    Anterior
                  </a>
                  <a
                    th:href="@{/(page=${currentPage + 1}, size=10)}"
                    th:classappend="${currentPage == totalPages} ? 'pointer-events-none opacity-50' : ''"
                    class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                  >
                    Siguiente
                  </a>
                </div>
                <div
                  class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"
                >
                  <div>
                    <p class="text-sm text-gray-700">
                      Mostrando
                      <span
                        class="font-medium"
                        th:text="${staffPage.numberOfElements}"
                      ></span>
                      de
                      <span
                        class="font-medium"
                        th:text="${staffPage.totalElements}"
                      ></span>
                      resultados
                    </p>
                  </div>
                  <div>
                    <nav
                      class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px"
                      aria-label="Pagination"
                    >
                      <a
                        th:href="@{/(page=${currentPage - 1}, size=10)}"
                        th:classappend="${currentPage == 1} ? 'pointer-events-none opacity-50' : ''"
                        class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
                      >
                        <span class="sr-only">Anterior</span>
                        ←
                      </a>
                      <span
                        class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"
                      >
                        Página <span th:text="${currentPage}"></span> de
                        <span th:text="${totalPages}"></span>
                      </span>
                      <a
                        th:href="@{/(page=${currentPage + 1}, size=10)}"
                        th:classappend="${currentPage == totalPages} ? 'pointer-events-none opacity-50' : ''"
                        class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
                      >
                        <span class="sr-only">Siguiente</span>
                        →
                      </a>
                    </nav>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Create User Form Section -->
          <div class="lg:col-span-1">
            <div
              class="bg-white rounded-lg shadow-md overflow-hidden sticky top-4"
            >
              <div class="bg-green-600 text-white px-6 py-4">
                <h2 class="text-xl font-semibold">Crear Nuevo Usuario</h2>
              </div>

              <form
                th:action="@{/users/create}"
                th:object="${createUserDto}"
                method="post"
                class="p-6 space-y-4"
              >
                <div>
                  <label
                    for="userName"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Nombre de Usuario</label
                  >
                  <input
                    type="text"
                    id="userName"
                    th:field="*{userName}"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                  />
                </div>

                <div>
                  <label
                    for="email"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Email</label
                  >
                  <input
                    type="email"
                    id="email"
                    th:field="*{email}"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                  />
                </div>

                <div>
                  <label
                    for="password"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Contraseña</label
                  >
                  <input
                    type="password"
                    id="password"
                    th:field="*{password}"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                  />
                </div>

                <div>
                  <label
                    for="phoneNumber"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Teléfono</label
                  >
                  <input
                    type="tel"
                    id="phoneNumber"
                    th:field="*{phoneNumber}"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                  />
                </div>

                <div>
                  <label
                    for="salary"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Salario</label
                  >
                  <input
                    type="number"
                    id="salary"
                    th:field="*{salary}"
                    step="0.01"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                  />
                </div>

                <div>
                  <label
                    for="currency"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Moneda</label
                  >
                  <select
                    id="currency"
                    th:field="*{currency}"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                  >
                    <option value="">Seleccionar...</option>
                    <option
                      th:each="curr : ${currencies}"
                      th:value="${curr}"
                      th:text="${curr}"
                    ></option>
                  </select>
                </div>

                <div>
                  <label
                    for="role"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Rol</label
                  >
                  <select
                    id="role"
                    th:field="*{role}"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                  >
                    <option value="">Seleccionar...</option>
                    <option
                      th:each="r : ${roles}"
                      th:value="${r}"
                      th:text="${r}"
                    ></option>
                  </select>
                </div>

                <button
                  type="submit"
                  class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors"
                >
                  Crear Usuario
                </button>
              </form>
            </div>
          </div>
        </div>

        <!-- API Info Section -->
        <div class="mt-8 bg-white rounded-lg shadow-md p-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">
            Información de la API
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="border border-gray-200 rounded-lg p-4">
              <h4 class="font-medium text-gray-700 mb-2">Documentación API</h4>
              <a
                href="/ptc/api/swagger-ui.html"
                target="_blank"
                class="text-blue-600 hover:text-blue-800 underline"
              >
                Ver Swagger UI
              </a>
            </div>
            <div class="border border-gray-200 rounded-lg p-4">
              <h4 class="font-medium text-gray-700 mb-2">Endpoint Base</h4>
              <code class="text-sm bg-gray-100 px-2 py-1 rounded"
                >/ptc/api/</code
              >
            </div>
            <div class="border border-gray-200 rounded-lg p-4">
              <h4 class="font-medium text-gray-700 mb-2">Versión</h4>
              <span class="text-gray-600">v1.0.0</span>
            </div>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-4 py-6 text-center">
          <p>
            &copy; 2025 PTC Agency. Sistema de gestión de agencia de viajes.
          </p>
        </div>
      </footer>
    </div>
  </body>
</html>
